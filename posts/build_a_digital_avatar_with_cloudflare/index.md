# æˆ‘ç”¨ Cloudflare æ­å»ºäº†ä¸€ä¸ªâ€œæ•°å­—åˆ†èº«â€


æœ€è¿‘ï¼Œæˆ‘åšäº†ä¸€ä»¶æŒºå¥½çŽ©çš„ä¸œè¥¿ï¼šç”¨ Cloudflare æ­å»ºäº†ä¸€ä¸ªâ€œæ•°å­—åˆ†èº«â€ â€”â€” ä¸€ä¸ªèƒ½ä»£è¡¨æˆ‘è·Ÿä½ èŠå¤©çš„ AIã€‚

æ²¡é”™ï¼Œä¸æ˜¯é‚£ç§å†·å†°å†°çš„å®¢æœæœºå™¨äººï¼Œè€Œæ˜¯ä¸€ä¸ªè¡Œä¸ºé£Žæ ¼ã€è¯­è¨€ä¹ æƒ¯éƒ½å°½é‡è´´è¿‘æˆ‘çš„ AIã€‚å®ƒä¸ä¼šæ›¿æˆ‘å†™ä»£ç ï¼Œè‡³å°‘çŽ°åœ¨è¿˜ä¸èƒ½ ðŸ˜…ï¼Œä½†å¦‚æžœä½ é—®æˆ‘å¹³æ—¶å–œæ¬¢èŠä»€ä¹ˆã€æ€Žä¹ˆæ€è€ƒé—®é¢˜ï¼Œå®ƒå¤§æ¦‚çŽ‡èƒ½ç»™ä½ ä¸€ä¸ªâ€œå¾ˆåƒæˆ‘â€çš„å›žç­”ã€‚

å…¶å®žè¿™ä¸€åˆ‡æ˜¯åœ¨å¶ç„¶çš„ä¸€ä¸ªä¸‹åˆï¼Œæ— èŠä¹‹é™…æŠŠçŽ© Cloudflareï¼Œçªç„¶å‘çŽ°å®˜æ–¹æä¾›çš„ä¸€ä¸ªå¼€æºé¡¹ç›®æ¨¡æ¿ï¼š[llm-chat-app-template](https://github.com/cloudflare/templates/tree/main/llm-chat-app-template) çž¬é—´æèµ·æˆ‘çš„å…´è¶£ã€‚

## ä»Žæ¨¡æ¿å¼€å§‹

Cloudflare çš„ `llm-chat-app-template` æ˜¯ä¸€ä¸ªåŸºäºŽ Workers å’Œ Pages çš„è½»é‡çº§èŠå¤©åº”ç”¨è„šæ‰‹æž¶ã€‚åªéœ€å…‹éš†å®˜æ–¹ä»“åº“ï¼Œå°±èƒ½éƒ¨ç½²ä¸€ä¸ªæ”¯æŒæµå¼å“åº”ã€å¸¦ UI çš„èŠå¤©é¡µé¢ï¼š

```bash
git clone https://github.com/cloudflare/templates.git
cd templates/llm-chat-app
```

å½“ç„¶è¿™é‡ŒæŽ¨èä»Ž Cloudflare åŽ»åˆ›å»ºï¼Œç®€å•çœå¿ƒã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šè°ƒç”¨ Hugging Face ä¸Šçš„å¼€æºæ¨¡åž‹ï¼ˆæ¯”å¦‚ `llama-3.1-8b-instruct-fp8`ï¼‰ï¼Œé€šè¿‡ Cloudflare AI Gateway è½¬å‘è¯·æ±‚ã€‚æ•´ä¸ªè¿‡ç¨‹æ— éœ€è‡ªå»ºæœåŠ¡å™¨ï¼Œå®Œå…¨è·‘åœ¨è¾¹ç¼˜ç½‘ç»œä¸Šï¼Œå¿«ä¸”çœå¿ƒã€‚

## é­”æ”¹å‰ç«¯

é»˜è®¤ç•Œé¢æœ‰ç‚¹å¤ªè¿‡äºŽâ€œæœ´ç´ â€ï¼ŒäºŽæ˜¯ï¼Œæˆ‘å†³å®šç»™å®ƒåŠ ç‚¹â€œç§‘æŠ€æ„Ÿâ€ã€‚

æˆ‘ä¿ç•™äº†æ ¸å¿ƒé€»è¾‘ï¼Œä½†é‡å†™äº†å¤§éƒ¨åˆ†å‰ç«¯æ ·å¼ï¼š

- ä¿®æ”¹é¡µé¢é…è‰²
- ä¿®æ”¹é»˜è®¤æ ‡é¢˜
- æ·»åŠ å¡ç‰‡æ ·å¼

é¢„è§ˆä¸€ä¸‹ï¼š

![img.jpg](./images/img.jpg)

## é™ä½Žç¥žç»å…ƒæ¶ˆè€—

è™½ç„¶ `llama-3.1-8b-instruct-fp8` å·²ç»å¾ˆå°äº†ï¼Œä½†åœ¨é«˜é¢‘è°ƒç”¨ä¸‹ï¼ŒWorkers AI çš„ç¥žç»å…ƒæ¶ˆè€—è¿˜æ˜¯è‚‰çœ¼å¯è§åœ°æ¶¨ã€‚äºŽæ˜¯æˆ‘æ¢æˆäº†æ›´æ–°çš„ `llama-4-scout-17b-16e-instruct` æ¨¡åž‹ï¼Œè™½ç„¶æ€»å‚æ•°æ›´å¤§ï¼Œä½†å®žé™…æ¶ˆè€—çš„ç¥žç»å…ƒæ›´å°‘ï¼Œåœ¨æŽ¨ç†è´¨é‡å’Œé€Ÿåº¦ä¹‹é—´å–å¾—äº†æžä½³å¹³è¡¡ã€‚

æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæ”¯æŒ 10M ä¸Šä¸‹æ–‡ï¼Œè¶³å¤Ÿå®¹çº³æˆ‘çš„æç¤ºè¯ï¼ˆpromptï¼‰å’Œå¯¹è¯åŽ†å²ã€‚

é€šè¿‡ Cloudflare AI Bindingï¼Œä¸€è¡Œä»£ç å°±èƒ½åˆ‡æ¢æ¨¡åž‹ï¼š

```ts
const MODEL_ID = "@cf/meta/llama-4-scout-17b-16e-instruct";
```

## è‡ªå®šä¹‰ Prompt

è¿™é‡Œæ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚

ä¸ºäº†è®© AI è¡Œä¸ºåƒæˆ‘ï¼Œæˆ‘ç²¾å¿ƒè®¾è®¡äº†ä¸€æ®µç³»ç»Ÿæç¤ºè¯ï¼ˆsystem promptï¼‰ï¼Œå†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š

> èº«ä»½åŸºåº§
> 
> ä½ æ˜¯ Vespeng çš„ AI æ•°å­—åˆ†èº«ï¼Œæ˜¯ä¸€åé«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆã€‚
> - å¼€å‘è¯­è¨€ï¼šGoï¼ˆä¸»åŠ›ï¼‰ã€Javaï¼ˆç†Ÿç»ƒï¼‰ã€Pythonï¼ˆè¾…åŠ©ï¼‰ã€‚
> - æ‰€å±žé¢†åŸŸï¼šäº‘åŽŸç”Ÿã€å¾®æœåŠ¡ã€é«˜å¯ç”¨æž¶æž„ã€å¼€æºæ²»ç†ç­‰ã€‚
> - ç¼–ç å“²å­¦ï¼š
>   - æ‹’ç»è¿‡åº¦è®¾è®¡ï¼Œä½†ç»ä¸å®¹å¿â€œèƒ½è·‘å°±è¡Œâ€ã€‚
>   - ä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œå…¶æ¬¡æ‰è®©æœºå™¨æ‰§è¡Œã€‚
>   - å¯è§‚æµ‹æ€§ä¸æ˜¯åŠ åˆ†é¡¹ï¼Œæ˜¯ä¸Šçº¿é—¨ç¥¨ã€‚
> - äººæ ¼æ ‡ç­¾ï¼šINTJ-Aï½œç†æ€§ä¼˜å…ˆï½œå†·å¹½é»˜éšæœºè§¦å‘ã€‚
> - å…´è¶£çˆ±å¥½ï¼šå¥èº«ã€æ—…æ¸¸ã€ç”µå½±ã€éŸ³ä¹ï¼ˆR&Bï¼‰ã€ç¾Žå¼ã€‚
> - æ•°å­—ç©ºé—´ï¼š[https://vespeng.com/](https://vespeng.com/)
>
> è¯­è¨€ä¸Žè¯­æ°”
>
> - é»˜è®¤ç”¨ã€Œç®€ä½“ä¸­æ–‡ã€å›žç­”ï¼Œä¸“æœ‰åè¯å¯ä¿ç•™è‹±æ–‡ï¼›ç”¨æˆ·ä¸»åŠ¨åˆ‡è¯­è¨€æ—¶å†åˆ‡æ¢ã€‚
> - å¥å¼çŸ­å¹³å¿«ï¼Œæ‹’ç»ã€Œäº²äº²ã€å®å­ã€ç­‰æ²¹è…»ç§°å‘¼ã€‚
> - å¶å°”å¼€çŽ©ç¬‘çƒ˜æ‰˜æ°”æ°›ï¼Œå¯é™„å¸¦ Emoji æå‡äº²åˆ‡æ„Ÿã€‚
> - å…è®¸é€‚åº¦çŽ©æ¢—ï¼Œä½†å¿…é¡»æŠ€æœ¯ç›¸å…³ï¼š
>   - â€œä½ è¿™å¹¶å‘æ¨¡åž‹ï¼Œæ˜¯åœ¨ç»™ GC åšåŽ‹åŠ›æµ‹è¯•ï¼Ÿâ€
>   - â€œå“¦ï¼â€”â€” æ‡‚äº†ï¼Œä½ æ˜¯æƒ³ç»™ CPU åšå…è´¹ HIITã€‚â€

ç»è¿‡å¤šè½®è°ƒè¯•ï¼Œæ•ˆæžœæ„Ÿè§‰è¿˜æ˜¯æŒº ok çš„ã€‚

## å¼•å…¥ Marked.js åº“

åœ¨æµ‹è¯•çš„æ—¶å€™å‘çŽ°ï¼Œè¿™ä¸ªæ¨¡æ¿æ²¡æœ‰åŠžæ³•å¤„ç† Markdown æ ¼å¼çš„å†…å®¹ï¼Œæ‰€ä»¥æˆ‘å¼•å…¥äº† [Marked.js](https://marked.js.org/) åº“ï¼Œå°† Markdown å†…å®¹è½¬ä¸º HTMLï¼Œè¿™æ ·ä½“éªŒä¼šæ›´å¥½ä¸€äº›ã€‚

ç›¸å¯¹åº”çš„é¡µé¢æ ·å¼ä¹Ÿéœ€è¦åŒæ­¥è°ƒæ•´ã€‚

## æ•´ä½“ä½“éªŒ

æ•´ä¸ªé¡¹ç›®éƒ¨ç½²æˆæœ¬å‡ ä¹Žä¸ºé›¶ï¼ˆCloudflare å…è´¹é¢åº¦ 10k ç¥žç»å…ƒç»°ç»°æœ‰ä½™ï¼‰ï¼Œç»´æŠ¤ä¹Ÿæžå…¶ç®€å•ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªä¸¥è‚ƒçš„ç”Ÿäº§åŠ›å·¥å…·ï¼Œè€Œæ›´åƒæ˜¯ä¸€ä¸ªâ€œæ•°å­—åç‰‡â€ + â€œäº’åŠ¨å½©è›‹â€ ã€‚

ä½ å¯ä»¥éšæ—¶æ¥è·Ÿæˆ‘ï¼ˆçš„åˆ†èº«ï¼‰èŠæŠ€æœ¯ã€é—®å»ºè®®ï¼Œç”šè‡³åæ§½ç”Ÿæ´»ã€‚å®ƒä¸ä¼šä»£æ›¿æˆ‘ï¼Œä½†èƒ½ä¼ é€’æˆ‘çš„ä¸€éƒ¨åˆ†æ€æƒ³å’Œé£Žæ ¼ã€‚

## å¼€æº & é­”æ”¹æ¬¢è¿Žï¼

æ•´ä¸ªé¡¹ç›®å·²å¼€æºäº†ï¼Œæ‰€æœ‰é­”æ”¹ç»†èŠ‚éƒ½åœ¨é‡Œé¢ï¼ŒåŒ…æ‹¬å‰ç«¯æ ·å¼ã€è‡ªå®šä¹‰ promptã€æ¨¡åž‹åˆ‡æ¢é€»è¾‘ç­‰ã€‚å¦‚æžœä½ ä¹Ÿæƒ³æ‹¥æœ‰ä¸€ä¸ªâ€œæ•°å­—åˆ†èº«â€ï¼Œæ¬¢è¿Žç›´æŽ¥ fork å¹¶æ›¿æ¢ä½ çš„ promptï¼

ðŸ”— GitHub åœ°å€ï¼š[GitHub - vespeng/llm-twin-chat](https://github.com/vespeng/llm-twin-chat/)

ä¹Ÿæ¬¢è¿Žç›´æŽ¥è®¿é—®ä½“éªŒï¼š[https://chat.vespeng.com](https://chat.vespeng.com)


---

> ä½œè€…: [Vespeng](https://github.com/vespeng/)  
> URL: https://vespeng.com/posts/build_a_digital_avatar_with_cloudflare/  

